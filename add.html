<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="style.css">
	<style type="text/css">
		#formVarif, #exists, #stepTwo, #stepThree, #stepTwoBody, #badImgLink{
			display: none;
		}
	</style>
	<title>Mike's Music</title>
</head>
<body>
	<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
		<div class="container">
			<a href="index.html" class="navbar-brand">Music.io</a>
			<button class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarCollapse">
				<ul class="navbar-nav ml-auto" style="float: right;">
					<li class="nav-item">
						<a href="collection.html" class="nav-link ml-5"><i class="fa fa-music fa-2x"></i><span id="cdis"> Collection</span></a>
					</li>
					<li class="nav-item">
						<a href="favorites.html" class="nav-link ml-5"><i class="fa fa-star fa-2x"></i><span id="cdis"> Favorites</span></a>
					</li>
					<li class="nav-item">
						<a href="add.html" class="nav-link ml-5"><i class="fa fa-plus fa-2x"></i><span id="cdis"> Add</span></a>
					</li>
					<li class="nav-item dropdown">
						<a href="#" class="nav-link dropdown-toggle ml-5" id="navbarDropdownMenuLink" data-toggle="dropdown"><i class="fa fa-user-circle-o fa-2x"></i></a>
						<div class="dropdown-menu dropdown-menu-right">
							<a href="settings.html" class="dropdown-item">Settings</a>
							<a href="login.html" class="dropdown-item">Log In</a>
							<a href="feedback.html" class="dropdown-item">Report Bug</a>
						</div>
					</li>
				</ul>
			</div>
		</div>
	</nav><br>

	<div class="container">
		<div class="alert alert-success">Step One: Enter meta-data</div>
		<form>
			<div class="form-group row">
				<label class="col-2 col-form-label">Album Title</label>
				<div class="col-10">
					<input type="text" name="title" id="title" class="form-control" placeholder="Album Title" required>
				</div>
			</div><!-- end row -->
			<div class="form-group row">
				<label class="col-2 col-form-label">Artist</label>
				<div class="col-10">
					<input type="text" name="artist" id="artist" class="form-control" placeholder="Artist" required>
				</div>
			</div><!-- end row -->
			<div class="form-group row">
				<label class="col-2 col-form-label">Release Year</label>
				<div class="col-10">
					<input type="text" name="year" id="year" class="form-control" placeholder="Release Year" required>
				</div>
			</div><!-- end row -->
			<button class="btn btn-outline-dark" type="submit" id="s-entry">Submit</button>
		</form>
		<br>
		<!-- TODO Check if entry already exists. If not, display next step. If so, display #exists alert
		-->
		<div class="alert alert-danger" id="formVarif">FILL IN ALL OF THE VALUES!</div>
		<div class="alert alert-success" id="exists">
			This has already been added! View the <a href="collection.html">collection</a> to find it.
		</div>
		<div class="alert alert-success" id="stepTwo">Step Two: Choose the correct <strong>Album Artwork:</strong></div>
		<div class="two" id="stepTwoBody">
			<p><a id="imgLink" target="_blank" href=""><button class="btn btn-primary btn-sm">Click Here</button></a> to find the correct Artwork. Click on the image thumbnail, then Right-click on the image and select <strong>"Copy image address"</strong></p>
			<div class="form-group row">
				<label class="col-2 col-form-label">Paste that in here:</label>
				<div class="col-10">
					<input type="text" name="img" id="img" class="form-control" maxlength="100" placeholder="Album Cover Link" required>
				</div>
			</div><!-- end row -->
			<button class="btn btn-outline-dark" type="submit" id="imgSubmit">Submit</button>
			<br><br>
		</div>
		<div class="alert alert-danger" id="badImgLink">
			The link you entered is not available. Make sure to copy the correct image address, not the thumbnail address.
		</div>
		<div class="alert alert-success" id="stepThree">
			Step Three: Choose the correct <strong>YouTube Link</strong> from the selection below:
		</div>
	</div>

	<footer class="bg-dark text-white">
		<div class="container">
			<div class="row">
				<div class="col text-center py-4">
					<h6>Michael's Music Organizer Copyright &copy; 2017</h6>
					<button class="btn btn-light btn-sm">Contact</button>
				</div>
			</div>
		</div>
	</footer>
</body>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
<script type="text/javascript">
	document.getElementById('s-entry').addEventListener('click', function(e){
		e.preventDefault();
		if(document.getElementById('title').value == "" || document.getElementById('artist').value == "" || document.getElementById('year').value == ""){
			document.getElementById('formVarif').style.display = "block";
		} else{
			var entry = {
				title: document.getElementById('title').value,
				artist: document.getElementById('artist').value,
				year: document.getElementById('year').value
			};
			console.log(entry);
			var noSpaceTitle = entry.title.replace(/ /g, '+');
			var noSpaceArtist = entry.artist.replace(/ /g, '+');
			document.getElementById('formVarif').style.display = "none";
			document.getElementById('stepTwo').style.display = "block";
			document.getElementById('stepTwoBody').style.display = "block";
			document.getElementById('s-entry').style.display = "none";

			var imgLink = document.getElementById('imgLink');
			imgLink.setAttribute('href', "https://www.google.com/search?tbm=isch&q="+noSpaceTitle+"+"+noSpaceArtist);

			document.getElementById('imgSubmit').addEventListener('click', function(){
				//test if url is ok
				var subLink = document.getElementById('img').value;
				subLink = subLink.toString();
				console.log("og sublink: " + subLink);
				console.log("og sublink length: " + subLink.length);
				var subLink2 = subLink.substring(subLink.length-4, subLink.length);
				console.log("og sublink2: " + subLink2);
				if(subLink2 == '.jpg' || subLink2 == '.png' || subLink2 == 'jpeg'){
					document.getElementById('stepThree').style.display = 'block';
					document.getElementById('imgSubmit').style.display = 'none';
				} else{
					document.getElementById('badImgLink').style.display = 'block';
				}
			});
		}
	});
</script>
</html>